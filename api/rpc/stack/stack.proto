syntax = "proto3";

package stack;

service StackService {
  rpc Create (CreateRequest) returns (CreateReply);
  rpc Up (UpRequest) returns (UpReply);
}

message CreateRequest {
  string stack_definition = 1;
}

message CreateReply {
  string stack_id = 1;
}

message UpRequest {
  string stackfile = 1;
}

message UpReply {
  string stack_id = 1;
}

message Stack {
  string stack_id = 1;
  repeated Service services = 2;
}

message Service {
  string name = 1;
  string image = 2;
  message PortBinding {
    string host_ip = 1;
    string host_port = 2;
  }
  message PortBindings {
    repeated PortBinding port_bindings =1;
  }
  map<string, PortBindings> ports = 3;
  uint64 replicas = 4;
  map<string, string> environment = 5;
  map<string, string> labels = 6;
}