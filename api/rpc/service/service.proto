syntax = "proto3";

package service;

message ServiceSpec {
  string image = 1;
  string name = 2;
  uint64 replicas = 3;
  repeated string env = 4;
  map<string, string> labels = 5;
  map<string, string> container_labels = 6;
  repeated PublishSpec publish_specs = 7;
}

message PublishSpec {
  string name = 1;
  string protocol = 2;
  uint32 publish_port = 3;
  uint32 internal_port = 4;
}

message ServiceCreateRequest {
  ServiceSpec service_spec = 1;
}

message ServiceCreateResponse {
  string id = 1;
}

message RemoveRequest {
  string ident = 1;
}

message RemoveResponse {
  string ident = 1;
}


service Service {
  rpc Create (ServiceCreateRequest) returns (ServiceCreateResponse) {}
  rpc Remove (RemoveRequest) returns (RemoveResponse) {}
}
