- service-create:
  cmd: amp service create
  args:
    - appcelerator/pinger
  options:
    - "--name {{call .uniq `pinger`}}"
    - "-p www:{{call .port `pinger1` 30000 32767}}:3000"
  expectation: service-id

- service-list:
  cmd: docker service ls
  args:
  options:
  expectation: docker-service-list-valid-service
  retry: 30
  delay: 1s
  timeout: 30s

- service-curl:
  cmd: curl -s
  args:
    - 127.0.0.1:{{call .port `pinger1` 30000 32767}}/ping
  options:
  expectation: service-curl
  retry: 30
  delay: 1s
  timeout: 30s

- service-remove:
  cmd: amp service rm
  args:
    - "{{call .uniq `pinger`}}"
  options:
    -
  expectation: service-remove

- service-list:
  cmd: docker service ls
  args:
  options:
  expectation: docker-service-list-invalid-service
