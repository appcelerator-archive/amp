- service-create:
  cmd: amp service create
  args:
    - appcelerator/pinger
  options:
    - "--name {{call .uniq `pinger`}}"
    - "-p www:{{call .port `pinger1` 49152 65535}}:3000"
  expectation: service-id

- service-list:
  cmd: docker service ls
  args:
  options:
  expectation: docker-service-list

# Should use API call as a form of blocking.
- service-curl:
  cmd: curl
  args:
    - localhost:{{call .port `pinger1` 49152 65535}}/ping
  options:
  expectation: service-curl
  retry: 3
  delay: 2500ms
  timeout: 10000ms

- service-remove:
  cmd: amp service rm
  args:
    - "{{call .uniq `pinger`}}"
  options:
    -
  expectation: "pinger-[[:alpha:]]+"

- service-list:
  cmd: docker service ls
  args:
  options:
  expectation: docker-service-list
